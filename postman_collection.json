{
  "info": {
    "name": "user-auth-mysql-app",
    "description": "Postman collection for the NestJS User Auth MySQL app (http://localhost:3000)",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json",
    "version": "1.0.0"
  },
  "variable": [
    { "key": "baseUrl", "value": "http://localhost:3000" },
    { "key": "token", "value": "" },
    { "key": "adminToken", "value": "" },
    { "key": "userId", "value": "" },
    { "key": "adminUserId", "value": "" },
    { "key": "tagId", "value": "" },
    { "key": "categoryId", "value": "" },
    { "key": "productId", "value": "" },
    { "key": "addressId", "value": "" },
    { "key": "cartItemId", "value": "" },
    { "key": "orderId", "value": "" },
    { "key": "postId", "value": "" },
    { "key": "commentId", "value": "" },
    { "key": "reviewId", "value": "" }
  ],
  "item": [
    {
      "name": "Auth",
      "item": [
        {
          "name": "Register",
          "request": {
            "method": "POST",
            "header": [
              { "key": "Content-Type", "value": "application/json" }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"Test User\",\n  \"email\": \"test@example.com\",\n  \"password\": \"password123\"\n}"
            },
            "url": "{{baseUrl}}/auth/register"
          },
          "response": []
        },
        {
          "name": "Login (sets token + userId)",
          "request": {
            "method": "POST",
            "header": [
              { "key": "Content-Type", "value": "application/json" }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"email\": \"test@example.com\",\n  \"password\": \"password123\"\n}"
            },
            "url": "{{baseUrl}}/auth/login"
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "const json = pm.response.json();",
                  "pm.collectionVariables.set('token', json.access_token);",
                  "pm.collectionVariables.set('userId', json.user.id);"
                ]
              }
            }
          ],
          "response": []
        },
        {
          "name": "Login Admin (sets adminToken + adminUserId)",
          "request": {
            "method": "POST",
            "header": [
              { "key": "Content-Type", "value": "application/json" }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"email\": \"admin@example.com\",\n  \"password\": \"password123\"\n}"
            },
            "url": "{{baseUrl}}/auth/login"
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "const json = pm.response.json();",
                  "pm.collectionVariables.set('adminToken', json.access_token);",
                  "pm.collectionVariables.set('adminUserId', json.user.id);"
                ]
              }
            }
          ],
          "response": []
        },
        {
          "name": "Profile (requires token)",
          "request": {
            "method": "GET",
            "header": [
              { "key": "Authorization", "value": "Bearer {{token}}" }
            ],
            "url": "{{baseUrl}}/auth/profile"
          },
          "response": []
        },
        {
          "name": "Verify JWT (requires token)",
          "request": {
            "method": "GET",
            "header": [
              { "key": "Authorization", "value": "Bearer {{token}}" }
            ],
            "url": "{{baseUrl}}/auth/verify"
          },
          "response": []
        }
      ]
    },
    {
      "name": "Tags (admin create/update/delete)",
      "item": [
        {
          "name": "List Tags",
          "request": { "method": "GET", "url": "{{baseUrl}}/tags" },
          "response": []
        },
        {
          "name": "Create Tag (admin)",
          "request": {
            "method": "POST",
            "header": [
              { "key": "Content-Type", "value": "application/json" },
              { "key": "Authorization", "value": "Bearer {{adminToken}}" }
            ],
            "body": { "mode": "raw", "raw": "{\n  \"name\": \"featured\"\n}" },
            "url": "{{baseUrl}}/tags"
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "const json = pm.response.json();",
                  "pm.collectionVariables.set('tagId', json.id);"
                ]
              }
            }
          ],
          "response": []
        }
      ]
    },
    {
      "name": "Categories (admin create/update/delete)",
      "item": [
        {
          "name": "List Categories",
          "request": { "method": "GET", "url": "{{baseUrl}}/categories" },
          "response": []
        },
        {
          "name": "Create Category (admin)",
          "request": {
            "method": "POST",
            "header": [
              { "key": "Content-Type", "value": "application/json" },
              { "key": "Authorization", "value": "Bearer {{adminToken}}" }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"Electronics\",\n  \"description\": \"Gadgets and devices\"\n}"
            },
            "url": "{{baseUrl}}/categories"
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "const json = pm.response.json();",
                  "pm.collectionVariables.set('categoryId', json.id);"
                ]
              }
            }
          ],
          "response": []
        }
      ]
    },
    {
      "name": "Products (admin create/update/delete)",
      "item": [
        {
          "name": "List Products",
          "request": { "method": "GET", "url": "{{baseUrl}}/products" },
          "response": []
        },
        {
          "name": "Create Product (admin)",
          "request": {
            "method": "POST",
            "header": [
              { "key": "Content-Type", "value": "application/json" },
              { "key": "Authorization", "value": "Bearer {{adminToken}}" }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"Wireless Mouse\",\n  \"sku\": \"MOUSE-001\",\n  \"description\": \"Ergonomic wireless mouse\",\n  \"price\": 29.99,\n  \"categoryId\": \"{{categoryId}}\",\n  \"tagIds\": [\"{{tagId}}\"]\n}"
            },
            "url": "{{baseUrl}}/products"
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "const json = pm.response.json();",
                  "pm.collectionVariables.set('productId', json.id);"
                ]
              }
            }
          ],
          "response": []
        }
      ]
    },
    {
      "name": "Inventory (admin manages stock)",
      "item": [
        {
          "name": "Get Inventory by Product",
          "request": {
            "method": "GET",
            "url": "{{baseUrl}}/inventory/products/{{productId}}"
          },
          "response": []
        },
        {
          "name": "Set Stock (admin)",
          "request": {
            "method": "PUT",
            "header": [
              { "key": "Content-Type", "value": "application/json" },
              { "key": "Authorization", "value": "Bearer {{adminToken}}" }
            ],
            "body": { "mode": "raw", "raw": "{\n  \"quantity\": 100\n}" },
            "url": "{{baseUrl}}/inventory/products/{{productId}}/stock"
          },
          "response": []
        }
      ]
    },
    {
      "name": "Addresses (JWT)",
      "item": [
        {
          "name": "Create Address",
          "request": {
            "method": "POST",
            "header": [
              { "key": "Content-Type", "value": "application/json" },
              { "key": "Authorization", "value": "Bearer {{token}}" }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"fullName\": \"Test User\",\n  \"phone\": \"9999999999\",\n  \"line1\": \"Street 1\",\n  \"city\": \"Pune\",\n  \"state\": \"MH\",\n  \"postalCode\": \"411001\",\n  \"country\": \"India\",\n  \"isDefault\": true\n}"
            },
            "url": "{{baseUrl}}/addresses"
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "const json = pm.response.json();",
                  "pm.collectionVariables.set('addressId', json.id);"
                ]
              }
            }
          ],
          "response": []
        },
        {
          "name": "List Addresses",
          "request": {
            "method": "GET",
            "header": [{ "key": "Authorization", "value": "Bearer {{token}}" }],
            "url": "{{baseUrl}}/addresses"
          },
          "response": []
        }
      ]
    },
    {
      "name": "Cart (JWT)",
      "item": [
        {
          "name": "Get Active Cart",
          "request": {
            "method": "GET",
            "header": [{ "key": "Authorization", "value": "Bearer {{token}}" }],
            "url": "{{baseUrl}}/cart"
          },
          "response": []
        },
        {
          "name": "Add Item to Cart",
          "request": {
            "method": "POST",
            "header": [
              { "key": "Content-Type", "value": "application/json" },
              { "key": "Authorization", "value": "Bearer {{token}}" }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"productId\": \"{{productId}}\",\n  \"quantity\": 2\n}"
            },
            "url": "{{baseUrl}}/cart/items"
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "const json = pm.response.json();",
                  "pm.collectionVariables.set('cartItemId', json.id);"
                ]
              }
            }
          ],
          "response": []
        }
      ]
    },
    {
      "name": "Orders (JWT)",
      "item": [
        {
          "name": "Checkout",
          "request": {
            "method": "POST",
            "header": [
              { "key": "Content-Type", "value": "application/json" },
              { "key": "Authorization", "value": "Bearer {{token}}" }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"addressId\": \"{{addressId}}\",\n  \"paymentMethod\": \"cod\"\n}"
            },
            "url": "{{baseUrl}}/orders/checkout"
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "const json = pm.response.json();",
                  "pm.collectionVariables.set('orderId', json.id);"
                ]
              }
            }
          ],
          "response": []
        },
        {
          "name": "List My Orders",
          "request": {
            "method": "GET",
            "header": [{ "key": "Authorization", "value": "Bearer {{token}}" }],
            "url": "{{baseUrl}}/orders"
          },
          "response": []
        },
        {
          "name": "Admin List All Orders",
          "request": {
            "method": "GET",
            "header": [{ "key": "Authorization", "value": "Bearer {{adminToken}}" }],
            "url": "{{baseUrl}}/orders/admin/all"
          },
          "response": []
        }
      ]
    },
    {
      "name": "Posts (JWT create/update/delete)",
      "item": [
        {
          "name": "List Posts",
          "request": { "method": "GET", "url": "{{baseUrl}}/posts" },
          "response": []
        },
        {
          "name": "Create Post (JWT)",
          "request": {
            "method": "POST",
            "header": [
              { "key": "Content-Type", "value": "application/json" },
              { "key": "Authorization", "value": "Bearer {{token}}" }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"title\": \"Hello World\",\n  \"content\": \"Body\",\n  \"categoryId\": \"{{categoryId}}\",\n  \"tagIds\": [\"{{tagId}}\"]\n}"
            },
            "url": "{{baseUrl}}/posts"
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "const json = pm.response.json();",
                  "pm.collectionVariables.set('postId', json.id);"
                ]
              }
            }
          ],
          "response": []
        }
      ]
    },
    {
      "name": "Comments (JWT create/delete)",
      "item": [
        {
          "name": "Create Comment (JWT)",
          "request": {
            "method": "POST",
            "header": [
              { "key": "Content-Type", "value": "application/json" },
              { "key": "Authorization", "value": "Bearer {{token}}" }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"postId\": \"{{postId}}\",\n  \"content\": \"Nice post\"\n}"
            },
            "url": "{{baseUrl}}/comments"
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "const json = pm.response.json();",
                  "pm.collectionVariables.set('commentId', json.id);"
                ]
              }
            }
          ],
          "response": []
        }
      ]
    },
    {
      "name": "Reviews",
      "item": [
        {
          "name": "List Reviews for Product",
          "request": {
            "method": "GET",
            "url": "{{baseUrl}}/products/{{productId}}/reviews"
          },
          "response": []
        },
        {
          "name": "Create Review (JWT)",
          "request": {
            "method": "POST",
            "header": [
              { "key": "Content-Type", "value": "application/json" },
              { "key": "Authorization", "value": "Bearer {{token}}" }
            ],
            "body": { "mode": "raw", "raw": "{\n  \"rating\": 5,\n  \"comment\": \"Great product\"\n}" },
            "url": "{{baseUrl}}/products/{{productId}}/reviews"
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "const json = pm.response.json();",
                  "pm.collectionVariables.set('reviewId', json.id);"
                ]
              }
            }
          ],
          "response": []
        }
      ]
    },
    {
      "name": "Users",
      "item": [
        {
          "name": "Create user (public)",
          "request": {
            "method": "POST",
            "header": [{ "key": "Content-Type", "value": "application/json" }],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"Another User\",\n  \"email\": \"another@example.com\",\n  \"password\": \"password123\"\n}"
            },
            "url": "{{baseUrl}}/users"
          },
          "response": []
        },
        {
          "name": "Get all users (protected)",
          "request": {
            "method": "GET",
            "header": [{ "key": "Authorization", "value": "Bearer {{token}}" }],
            "url": "{{baseUrl}}/users"
          },
          "response": []
        },
        {
          "name": "Get user by id (protected)",
          "request": {
            "method": "GET",
            "header": [{ "key": "Authorization", "value": "Bearer {{token}}" }],
            "url": "{{baseUrl}}/users/{{userId}}"
          },
          "response": []
        }
      ]
    }
  ]
}
